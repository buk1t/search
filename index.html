<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Home</title>

    <script>
      (function () {
        const THEME_KEY = "home.theme.v1";
        try {
          const raw = localStorage.getItem(THEME_KEY);
          if (!raw) return;

          const theme = JSON.parse(raw);
          const isDark =
            window.matchMedia &&
            window.matchMedia("(prefers-color-scheme: dark)").matches;

          const vars = (isDark ? theme?.dark?.vars : theme?.light?.vars) || {};
          const root = document.documentElement;

          for (const [k, v] of Object.entries(vars)) {
            root.style.setProperty(k, String(v));
          }
        } catch {}
      })();
    </script>

    <link
      rel="icon"
      type="image/png"
      href="https://api.buk1t.com/favicon/favicon-96x96.png"
      sizes="96x96"
    />
    <link
      rel="icon"
      type="image/svg+xml"
      href="https://api.buk1t.com/favicon/favicon.svg"
    />
    <link
      rel="shortcut icon"
      href="https://api.buk1t.com/favicon/favicon.ico"
    />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="https://api.buk1t.com/favicon/apple-touch-icon.png"
    />
    <meta name="apple-mobile-web-app-title" content="MyWebSite" />
    <link
      rel="manifest"
      href="https://api.buk1t.com/favicon/site.webmanifest"
    />

    <link rel="stylesheet" href="style.css" />
    <link rel="preconnect" href="https://api.open-meteo.com" crossorigin />
    <link rel="dns-prefetch" href="//api.open-meteo.com" />
  </head>

  <body>
    <div class="bg"></div>
    <div class="overlay"></div>

    <main class="wrap">
      <header class="top">
        <div class="top-left">
          <h1 class="title">Home</h1>
          <p class="subtitle" id="subtitle"></p>
        </div>

        <div class="top-right">
          <div class="top-actions">
            <a
              class="back-link back-link--small"
              href="https://links.buk1t.com"
              rel="noopener"
            >
              ← links
            </a>
            <a
              class="back-link back-link--small"
              href="https://www.buk1t.com"
              rel="noopener"
            >
              ← buk1t.com
            </a>
            <a class="iconbtn" href="./settings" aria-label="Settings">
              <svg
                class="ico"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="1.8"
                stroke-linecap="round"
                stroke-linejoin="round"
                aria-hidden="true"
              >
                <path d="M4 6h10"></path>
                <path d="M18 6h2"></path>
                <circle cx="16" cy="6" r="2"></circle>

                <path d="M4 12h2"></path>
                <path d="M10 12h10"></path>
                <circle cx="8" cy="12" r="2"></circle>

                <path d="M4 18h14"></path>
                <path d="M22 18h-2"></path>
                <circle cx="20" cy="18" r="2"></circle>
              </svg>
            </a>
          </div>

          <form class="search" id="searchForm" autocomplete="off">
            <input
              class="search-input"
              id="searchInput"
              type="text"
              inputmode="search"
              placeholder="Search or type a URL"
              aria-label="Search"
            />
          </form>
        </div>
      </header>

      <div class="layout">
        <section class="left">
          <div class="grid" id="linksGrid"></div>
        </section>

        <aside class="right">
          <div class="panel" id="weatherPanel">
            <div class="panel-head">
              <div class="panel-title">Weather</div>
              <div class="pill" id="weatherCity">Seattle</div>
            </div>

            <div class="weather-main">
              <div class="weather-big">
                <span class="weather-emoji" id="wxEmoji">⛅️</span>
                <span class="weather-temp" id="wxTemp">--°</span>
              </div>

              <div class="weather-sub" id="wxDesc">Loading…</div>
              <div class="weather-mini" id="wxMini"></div>
            </div>
          </div>

          <div class="panel">
            <div class="panel-head">
              <div class="panel-title">Checklist</div>
            </div>

            <div class="panel-sub">(auto-saves)</div>
            <div class="todo todo-lines" id="todo"></div>

            <div class="modal" id="archiveModal" aria-hidden="true">
              <div class="modal-backdrop" id="archiveClose"></div>

              <div
                class="modal-card"
                role="dialog"
                aria-modal="true"
                aria-label="Archive"
              >
                <div class="modal-head">
                  <div class="modal-title">Archive</div>
                </div>

                <div class="modal-sub">
                  Completed tasks (auto-moved 5s after checking)
                </div>
                <div class="archive-list" id="archiveList"></div>
              </div>
            </div>
          </div>
        </aside>
      </div>
    </main>

    <div class="version" id="version"></div>

    <script src="version.js"></script>
    <script src="icons.js"></script>
    <script src="script.js"></script>
  </body>
</html>
