<!-- /settings.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Settings</title>

    <script>
      (function () {
        const THEME_KEY = "home.theme.v1";
        try {
          const raw = localStorage.getItem(THEME_KEY);
          if (!raw) return;

          const theme = JSON.parse(raw);
          const isDark =
            window.matchMedia &&
            window.matchMedia("(prefers-color-scheme: dark)").matches;

          const vars = (isDark ? theme?.dark?.vars : theme?.light?.vars) || {};
          const root = document.documentElement;

          for (const [k, v] of Object.entries(vars)) {
            root.style.setProperty(k, String(v));
          }
        } catch {}
      })();
    </script>

    <script src="/js/theme-apply.js"></script>
    <link rel="stylesheet" href="/css/style.css" />

    <script
      type="module"
      src="https://api.buk1t.com/js/favicon.js"
      data-app-title="buk1t"
      data-accent="#3ddc97"
    ></script>
  </head>

  <body>
    <div class="bg"></div>
    <div class="overlay"></div>

    <main class="wrap">
      <header class="top">
        <div class="top-left">
          <h1 class="title">Settings</h1>
          <p class="subtitle">Customize links, weather, and search.</p>
        </div>
      </header>

      <div class="layout" style="grid-template-columns: 1fr 330px">
        <section class="left">
          <div class="panel">
            <div class="panel-head">
              <div class="panel-title">Location city</div>
              <div class="pill" id="currentCityPill">Seattle</div>
            </div>
            <div class="panel-sub">Search and select a city.</div>

            <form
              id="cityForm"
              class="search"
              autocomplete="off"
              style="margin-top: 12px"
            >
              <input
                class="search-input"
                id="cityInput"
                type="text"
                placeholder="Search city (e.g., Seattle)"
              />
            </form>

            <div id="cityResults" style="margin-top: 12px"></div>
          </div>

          <div class="panel" style="margin-top: 14px">
            <div class="panel-head">
              <div class="panel-title">Search engine</div>
              <div class="pill" id="currentSearchPill">Google</div>
            </div>
            <div class="panel-sub">Controls what Home search uses.</div>

            <div style="margin-top: 12px; display: grid; gap: 10px">
              <div class="select-wrap">
                <select class="select" id="searchEngine">
                  <option value="google">Google</option>
                  <option value="ddg">DuckDuckGo</option>
                  <option value="brave">Brave Search</option>
                  <option value="bing">Bing</option>
                  <option value="kagi">Kagi</option>
                  <option value="perplexity">Perplexity</option>
                  <option value="custom">Customâ€¦</option>
                </select>
              </div>

              <div id="customSearchWrap" style="display: none">
                <div class="panel-sub" style="margin-top: 0">
                  Custom template (must include <code>{q}</code>)
                </div>
                <input
                  class="search-input"
                  id="searchCustom"
                  type="text"
                  placeholder="https://example.com/search?q={q}"
                />
              </div>
            </div>
          </div>

          <div class="panel" style="margin-top: 14px">
            <div class="panel-head">
              <div class="panel-title">Links grid</div>
              <button class="ghostbtn" id="addLinkBtn" type="button">
                Add link
              </button>
            </div>
            <div class="panel-sub">These appear on your Home grid.</div>

            <div id="linksList" style="margin-top: 12px"></div>
          </div>

          <div class="panel" style="margin-top: 14px">
            <div class="panel-head">
              <div class="panel-title">Import / Export</div>
            </div>
            <div class="panel-sub">
              Move your setup between browsers/devices.
            </div>

            <div style="display: flex; gap: 10px; margin-top: 12px">
              <button class="ghostbtn" id="exportBtn" type="button">
                Export
              </button>

              <label class="ghostbtn" for="importFile" style="cursor: pointer">
                Import
              </label>
              <input
                id="importFile"
                type="file"
                accept=".txt,text/plain"
                style="display: none"
              />
            </div>

            <div
              id="importExportMsg"
              class="panel-sub"
              style="margin-top: 10px"
            ></div>
          </div>
        </section>

        <aside class="right">
          <div class="panel">
            <div class="panel-head">
              <div class="panel-title">Archive</div>

              <div style="display: flex; gap: 10px; align-items: center">
                <button class="ghostbtn" id="archiveRefreshBtn" type="button">
                  Refresh
                </button>
                <button class="ghostbtn" id="archiveClearBtn" type="button">
                  Clear all
                </button>
              </div>
            </div>

            <div class="panel-sub">
              Completed tasks live here. Restore or delete.
            </div>

            <div
              class="archive-list"
              id="archiveList"
              style="margin-top: 12px"
            ></div>
          </div>
        </aside>
      </div>
    </main>

    <script src="/js/nav.js"></script>
    <script src="/js/version.js"></script>
    <script src="/js/icons.js"></script>
    <script src="/js/settings.js"></script>
  </body>
</html>
